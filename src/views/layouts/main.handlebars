<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SignIn&SignUp</title>
    <link rel="stylesheet" type="text/css" href="../style.css" />
  </head>

  <body>
    {{#if user}}
<nav class="navbar">
      <div class="logo">Eudy-Market</div>

      <div class="user-menu" id="userMenu">
        <button class="user-button" onclick="toggleMenu()">
          <div class="user-avatar">JD</div>
          <span>{{user.userName}}</span>
          <span class="dropdown-arrow">▼</span>
        </button>

        <div class="dropdown-menu">
          <div class="dropdown-header">
            <div class="user-name">{{user.userName}}</div>
            <div class="user-email">{{user.userEmail}}</div>
          </div>

          <div class="dropdown-section">
            <div class="section-title">Módulos</div>

            <a href="/user/shop" class="dropdown-item">
              <div class="item-icon">💰</div>
              <span class="item-text">Caja</span>
            </a>

            <a href="/user/sales" class="dropdown-item">
              <div class="item-icon">👩‍💻</div>
              <span class="item-text">Ventas</span>
            </a>

            <a href="#" class="dropdown-item">
              <div class="item-icon">📦</div>
              <span class="item-text">Inventario</span>
            </a>

            <a href="/user/config" class="dropdown-item">
              <div class="item-icon">⚙️</div>
              <span class="item-text">Configuración</span>
            </a>
          </div>

          <a href="#" class="dropdown-item logout" id="logout-link">
            <div class="item-icon">🚪</div>
            <span class="item-text">Cerrar Sesión</span>
          </a>
        </div>
      </div>
    </nav>
    {{/if}}
    {{{body}}}
    
    <script src="https://cdn.jsdelivr.net/npm/@ericblade/quagga2/dist/quagga.js"></script>
    <script src="../app.js"></script>
    <script src="../quagga.js"></script>

    <script>
      document.getElementById("logout-link").addEventListener("click", function (e) {
  e.preventDefault();
  fetch("/user/logout", {
    method: "POST",
    credentials: "same-origin",
    headers: {
      "Content-Type": "application/json",
    },
  }).then((res) => {
    if (res.redirected) {
      window.location.href = res.url;
    } else {
      window.location.reload();
    }
  });
});

    </script>
  </body>
  </script>
</html>
